<!doctype html>
<html>
<head>
<meta charset="UTF-8">
	<title>Destinations of Foreign Domestic Workers</title>
	<script type="text/javascript" src="https://d3js.org/d3.v3.min.js"></script>
	<link type="text/css" rel="stylesheet" href="css/style.css"/>
    <link rel="stylesheet" href="animate.css"/>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
    <script src="https://github.com/HubSpot/tether/blob/master/dist/js/tether.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
    
	<!-- Google Fonts -->
	<link href="https://fonts.googleapis.com/css?family=Open+Sans|Ubuntu" rel="stylesheet">
</head>

<body>
	<div id="heading-next">
  		<br>Their Origins
  	</div>
   	<div id="container">
    	<div id="map" class="animated fadeIn"></div>
    		<script src="https://api.tiles.mapbox.com/mapbox-gl-js/v0.33.1/mapbox-gl.js"></script>
     	<div id="textbox-next">
        	<p><span id="intro1" class="animated fadeIn">Hong Kong has one of the highest densities of domestic workers in the world. In 2016, there were over <b>0.3 million</b> Foreign Domestic Workers in Hong Kong. </span></p>
        	<p><span id="intro2" class="animated fadeIn">However, Hong Kong has been accused of condoning <b>modern-day slavery</b> and treating helpers as second-class citizens for years. They are never considered as part of the Chinese-dominated society. Not only being discriminated and defamed, they are also often <b>overworked</b>, <b>underpaid</b> and <b>abused</b> systematically.</span></p>
        	<p><span id="intro3" class="animated fadeIn">This visualisation will bring you through their story.</span></p>
    	</div>
   		<div id='legend'></div>
    </div>
	
	<div id="clicker-next"><a href="https://justin-yim.github.io/Foreign-Domestic-Workers-in-Hong-Kong/FDW-in-HK.html">Next</a></div>
</body>

<script>
mapboxgl.accessToken = 'pk.eyJ1IjoianVzdHlpbSIsImEiOiJjaXVoNXB1YncwMDN5MnlxbDczbTc0YTRtIn0.LwgmMbs0c0grWfA2-oXD0Q';
// This adds the map to your page
var map = new mapboxgl.Map({
  // container id specified in the HTML
  container: 'map',
  // style URL
  style: 'mapbox://styles/justyim/cj0jfcjl800792sqpf89mi0ok',
  // initial position in [long, lat] format
  center: [101.77734374999999, 17.14079039331665],
  // initial zoom
  zoom: 2
});
          
	// Add zoom and rotation controls to the map.
	map.addControl(new mapboxgl.NavigationControl());
	
	map.on('load', function() {
  var layers = ['map-1-2unjty', 'fdw-origins copy 1', 'fdw-origins copy', 'fdw-origins'];
	layers.forEach(function(layer) {
	  var color = map.getPaintProperty(layer, 'circle-color');
	  var item = document.createElement('div');
	  var key = document.createElement('span');
	  key.className = 'legend-key';
	  key.style.backgroundColor = color;

	  var value = document.createElement('span');
	  value.innerHTML = layer;
	  item.appendChild(key);
	  item.appendChild(value);
	  legend.appendChild(item);
	});
	
	map.on('mousemove', function(e) {
  var states = map.queryRenderedFeatures(e.point, {
    layers: layers
  });		

  if (states.length > 0) {
    document.getElementById('pd').innerHTML ='<h3><strong>' + states[0].properties.country + '</strong></h3><p><strong>' + 'Percentage Change in Ridership:&nbsp</strong>'+ states[0].properties.FDWnumber + '%</p><p><strong>Federal Funding for UZAs Received (FY2016):&nbsp' + '</strong>$' + states[0].properties.FDWnumber + '</p><p><strong>UZA Population (2010):&nbsp' + '</strong>' + states[0].properties.FDWnumber + '&nbsppeople per mile'; 
  } else {
    document.getElementById('pd').innerHTML = '<p>Hover over a colored area</p>';
  }
});
});	

(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-86746631-2', 'auto');
  ga('send', 'pageview');

</script>

</html>
